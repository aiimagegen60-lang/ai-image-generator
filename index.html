<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Image Generator</title>

<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:Arial, sans-serif;
}
header{
  padding:14px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  background:#161616;
}
.container{ padding:15px; }
textarea{
  width:100%;
  height:90px;
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
}
button{
  width:100%;
  margin-top:12px;
  padding:14px;
  font-size:16px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  background:#00e676;
  color:#000;
}
#imgBox{
  margin-top:15px;
  height:420px;
  border-radius:12px;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
#imgBox img{
  max-width:100%;
  max-height:100%;
}
.hint{
  color:#aaa;
  font-size:14px;
}
</style>
</head>

<body>

<header>ü§ñ AI Image Generator</header>

<div class="container">

<textarea id="prompt" placeholder="Describe your image..."></textarea>
<button onclick="generate()">‚ö° Generate Image</button>

<div id="imgBox">
  <span class="hint">Generated image will appear here</span>
</div>

</div>

<script>
// üî¥ PASTE YOUR WORKER URL HERE
const WORKER_URL = "https://fragrant-salad-e7eb.aiimagegen60.workers.dev";

async function generate(){
  const p = document.getElementById("prompt").value.trim();
  if(!p){ alert("Enter prompt"); return; }

  const box = document.getElementById("imgBox");
  box.innerHTML = "<span class='hint'>‚è≥ Generating‚Ä¶</span>";

  async function call(){
    const r = await fetch(WORKER_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({prompt:p})
    });
    const ct = r.headers.get("content-type")||"";
    if(ct.startsWith("image/")) return r;
    return null;
  }

  let res = await call();

  // üîÅ Auto retry if HF busy
  if(!res){
    box.innerHTML="<span class='hint'>üî• Warming up model‚Ä¶</span>";
    await new Promise(r=>setTimeout(r,3000));
    res = await call();
  }

  if(!res){
    box.innerHTML="<span class='hint'>‚ùå Server busy. Try again.</span>";
    return;
  }

  const blob = await res.blob();
  const url = URL.createObjectURL(blob);
  box.innerHTML = `<img src="${url}">`;
}
</script>

</body>
</html>
