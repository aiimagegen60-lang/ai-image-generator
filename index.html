<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Image Generator</title>

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:Arial}
header{padding:14px;text-align:center;font-size:20px;background:#161616}
.container{padding:15px}
textarea{width:100%;height:90px;padding:12px;border-radius:10px;border:none}
button{width:100%;margin-top:12px;padding:14px;font-size:16px;
border:none;border-radius:10px;font-weight:bold;background:#00e676}
#status{margin-top:10px;color:#aaa;text-align:center}
#imgBox{margin-top:15px;position:relative}
#imgBox img{width:100%;border-radius:12px;display:none}
</style>
</head>

<body>

<header>AI Image Generator</header>

<div class="container">
<textarea id="prompt" placeholder="Describe your image..."></textarea>
<button onclick="generate()">⚡ Generate Image</button>
<div id="status"></div>

<div id="imgBox">
  <img id="img">
</div>
</div>

<script>
const WORKER_URL =
"https://fragrant-salad-e7eb.aiimagegen60.workers.dev";

async function generate(){
  const prompt = document.getElementById("prompt").value;
  const status = document.getElementById("status");
  const img = document.getElementById("img");

  status.innerText = "⏳ Generating...";
  img.style.display = "none";

  try{
    const res = await fetch(WORKER_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({prompt})
    });

    if(!res.ok){
      status.innerText="⚠️ Busy… retrying";
      setTimeout(generate,3000);
      return;
    }

    const blob = await res.blob();
    img.src = URL.createObjectURL(blob);
    img.style.display="block";
    status.innerText="✅ Done";

  }catch{
    status.innerText="❌ Error";
  }
}
</script>

</body>
</html>
